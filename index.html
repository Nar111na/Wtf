<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #120c1f; color: white; font-family: sans-serif; overflow-x: hidden; }

  /* Упрощенный фон без тяжелых фильтров */
  .rave-bg {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    z-index: -1; background: #0d0a1a; overflow: hidden;
  }

  .blob {
    position: absolute; border-radius: 50%;
    width: 300px; height: 300px;
    opacity: 0.6;
    /* Используем градиент вместо фильтра blur для стабильности */
    background: radial-gradient(circle, #5b247a 0%, transparent 70%);
    animation: move 15s infinite alternate ease-in-out;
  }

  .b1 { top: -50px; left: -50px; background: radial-gradient(circle, #6a11cb 0%, transparent 70%); }
  .b2 { bottom: -50px; right: -50px; background: radial-gradient(circle, #2575fc 0%, transparent 70%); animation-duration: 20s; }
  .b3 { top: 40%; left: 30%; background: radial-gradient(circle, #ff00cc 0%, transparent 70%); opacity: 0.3; }

  @keyframes move {
    0% { transform: translate(0, 0); }
    100% { transform: translate(40px, 40px); }
  }

  /* Интерфейс как на скриншоте */
  header { display: flex; justify-content: space-between; padding: 20px; align-items: center; }
  .logo { font-size: 28px; font-weight: 900; }
  .search-bar { background: rgba(255,255,255,0.1); border-radius: 15px; padding: 12px; margin: 0 15px 20px; display: flex; align-items: center; }
  .search-bar input { background: none; border: none; color: white; margin-left: 10px; width: 100%; outline: none; }
  .card { background: rgba(255,255,255,0.08); border-radius: 20px; display: flex; height: 100px; margin: 0 15px 12px; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); }
  .thumb { width: 140px; background: #000; }
  .thumb img { width: 100%; height: 100%; object-fit: cover; }
  .fab { position: fixed; bottom: 30px; right: 25px; background: white; color: black; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
</style>
<body>
  <div class="rave-bg">
    <div class="blob b1"></div>
    <div class="blob b2"></div>
    <div class="blob b3"></div>
  </div>

  <header>
    <i class="fas fa-cog"></i>
    <div class="logo">rave</div>
    <i class="fas fa-user-friends"></i>
  </header>

  <div class="search-bar"><i class="fas fa-search"></i><input type="text" placeholder="Поиск"></div>
  
  <div id="list"></div>

  <div class="fab" onclick="add()"><i class="fas fa-plus"></i></div>

  <script>
    const S_URL = 'https://otkessnonmdttowgkfrg.supabase.co';
    const S_KEY = 'Sb_publishable_J3AE0I_VFL0dvf3ffO7vbg_bwHJSWux';
    const sub = supabase.createClient(S_URL, S_KEY);

    async function draw() {
      const { data } = await sub.from('rooms').select('*').gt('participants_count', 0).order('created_at', {ascending: false});
      document.getElementById('list').innerHTML = data ? data.map(r => `
        <div class="card">
          <div class="thumb"><img src="https://picsum.photos/seed/${r.id}/200/120"></div>
          <div style="padding:15px"><b>${r.title}</b><br><span style="opacity:0.5;font-size:12px">${r.participants_count} чел.</span></div>
        </div>`).join('') : '';
    }

    async function add() {
      const t = prompt("Имя рейва:");
      if(t) { await sub.from('rooms').insert([{title: t, participants_count: 1}]); draw(); }
    }

    draw();
    sub.channel('any').on('postgres_changes', {event:'*', schema:'public', table:'rooms'}, draw).subscribe();
  </script>
</body>
</html>
